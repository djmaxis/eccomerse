<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>EEV Store - Electrónicos y Celulares</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link rel="stylesheet" href="css/mi_perfil/mi_perfil.css" />
  <link rel="stylesheet" href="css/mi_perfil/menu.css" />
  <link rel="stylesheet" href="css/proc_pago.css" />
  <link rel="stylesheet" href="css/checkout/checkout.css" />
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar">
    <div class="container navbar-container">
      <a href="index.html" class="logo">
        <i class="fas fa-microchip"></i>
        <span>EEV Store</span>
      </a>

      <div class="nav-right">
        <button class="cart-btn" id="cart-btn" aria-label="Carrito">
          <i class="fas fa-shopping-cart"></i>
          <span class="cart-count">0</span>
        </button>

        <!-- Grupo autenticado -->
        <div class="auth-group" id="user-authenticated" style="display:none;">
          <div class="user-info" id="user-info">
            <span class="user-name" id="user-name">Juan Díaz</span>
          </div>
          <a href="login.html" class="auth-link login-link" id="btnLogin" hidden>Iniciar sesión</a>
          <a href="registrarse.html" class="auth-link register-link" id="btnRegister" hidden>Registrarse</a>
          <a href="#" class="logout-btn" id="btnLogout">Cerrar Sesión</a>
        </div>

        <!-- Grupo NO autenticado -->
        <div class="auth-group" id="user-unauthenticated" style="display:flex;">
          <a href="login.html" class="auth-link login-link" id="btnLogin2">Iniciar sesión</a>
          <a href="registrarse.html" class="auth-link register-link" id="btnRegister2">Registrarse</a>
        </div>
      </div>
    </div>
  </nav>

  <!-- Layout Perfil -->
  <div class="container profile-layout" id="profile-layout">
    <!-- Sidebar -->
    <aside id="profile-sidebar" aria-label="Menú de perfil">
      <nav class="sidebar-nav" aria-labelledby="sidebar-title">
        <div class="sidebar-header">
          <h2 id="sidebar-title">Mi Panel</h2>
          <button type="button" id="sidebar-collapse" aria-expanded="false" aria-controls="sidebar-groups">
            <i class="fa-solid fa-bars"></i>
          </button>
        </div>

        <div id="sidebar-groups">
          <!-- (todo tu menú tal cual) -->
          <!-- Mi Perfil -->
          <section class="sidebar-group">
            <button class="sidebar-toggle" type="button" data-target="grp-perfil" aria-expanded="false" aria-controls="grp-perfil">
              <i class="fa-solid fa-user"></i><span>Mi Perfil</span>
              <i class="fa-solid fa-chevron-down caret"></i>
            </button>
            <ul id="grp-perfil" class="sidebar-list" hidden>
              <li><a href="mi_perfil.html"><i class="fa-regular fa-id-card"></i>Datos personales</a></li>
              <li><a href="Direcciones.html"><i class="fa-solid fa-location-dot"></i>Direcciones</a></li>
              <li><a href="metodo_pago.html"><i class="fa-regular fa-credit-card"></i>Métodos de pago</a></li>
              <li><a href="#"><i class="fa-solid fa-sliders"></i>Preferencias de cuenta</a></li>
              <li><a href="#"><i class="fa-solid fa-shield-halved"></i>Configuración de privacidad</a></li>
              <li><a href="#"><i class="fa-solid fa-key"></i>Cambiar contraseña</a></li>
            </ul>
          </section>

          <!-- Pedidos -->
          <section class="sidebar-group">
            <button class="sidebar-toggle" type="button" data-target="grp-pedidos" aria-expanded="false" aria-controls="grp-pedidos">
              <i class="fa-solid fa-bag-shopping"></i><span>Pedidos</span>
              <i class="fa-solid fa-chevron-down caret"></i>
            </button>
            <ul id="grp-pedidos" class="sidebar-list" hidden>
              <li><a href="orders.html"><i class="fa-solid fa-file-invoice-dollar"></i>Órdenes de compra</a></li>
              <li><a href="orders.html"><i class="fa-solid fa-file-invoice"></i>Facturas</a></li>
              <li><a href="#"><i class="fa-solid fa-truck"></i>Seguimiento de envíos</a></li>
              <li><a href="#"><i class="fa-solid fa-clock-rotate-left"></i>Historial de pedidos</a></li>
              <li><a href="#"><i class="fa-regular fa-hourglass-half"></i>Pedidos pendientes</a></li>
              <li><a href="#"><i class="fa-solid fa-rotate-left"></i>Devoluciones y reembolsos</a></li>
            </ul>
          </section>

          <!-- Compras -->
          <section class="sidebar-group">
            <button class="sidebar-toggle" type="button" data-target="grp-compras" aria-expanded="false" aria-controls="grp-compras">
              <i class="fa-solid fa-cart-plus"></i><span>Compras</span>
              <i class="fa-solid fa-chevron-down caret"></i>
            </button>
            <ul id="grp-compras" class="sidebar-list" hidden>
              <li><a href="#"><i class="fa-solid fa-cart-shopping"></i>Carrito de compras</a></li>
              <li><a href="#"><i class="fa-regular fa-heart"></i>Lista de deseos</a></li>
              <li><a href="#"><i class="fa-regular fa-star"></i>Favoritos</a></li>
              <li><a href="#"><i class="fa-solid fa-code-compare"></i>Comparar productos</a></li>
              <li><a href="#"><i class="fa-regular fa-eye"></i>Productos vistos recientemente</a></li>
              <li><a href="#"><i class="fa-solid fa-wand-magic-sparkles"></i>Recomendaciones personalizadas</a></li>
            </ul>
          </section>

          <!-- Categorías -->
          <section class="sidebar-group">
            <button class="sidebar-toggle" type="button" data-target="grp-categorias" aria-expanded="false" aria-controls="grp-categorias">
              <i class="fa-solid fa-layer-group"></i><span>Categorías</span>
              <i class="fa-solid fa-chevron-down caret"></i>
            </button>
            <ul id="grp-categorias" class="sidebar-list" hidden>
              <li><a href="#"><i class="fa-solid fa-plug"></i>Electrónicos</a></li>
              <li><a href="#"><i class="fa-solid fa-mobile-screen"></i>Smartphones</a></li>
              <li><a href="#"><i class="fa-solid fa-laptop"></i>Laptops y computadoras</a></li>
              <li><a href="#"><i class="fa-solid fa-headphones"></i>Audio y video</a></li>
              <li><a href="#"><i class="fa-solid fa-gamepad"></i>Gaming</a></li>
              <li><a href="#"><i class="fa-solid fa-keyboard"></i>Accesorios</a></li>
            </ul>
          </section>

          <!-- Configuración -->
          <section class="sidebar-group">
            <button class="sidebar-toggle" type="button" data-target="grp-config" aria-expanded="false" aria-controls="grp-config">
              <i class="fa-solid fa-gear"></i><span>Configuración</span>
              <i class="fa-solid fa-chevron-down caret"></i>
            </button>
            <ul id="grp-config" class="sidebar-list" hidden>
              <li><a href="#"><i class="fa-solid fa-language"></i>Idioma</a></li>
              <li><a href="#"><i class="fa-solid fa-coins"></i>Moneda</a></li>
              <li><a href="#"><i class="fa-solid fa-globe"></i>Región</a></li>
              <li><a href="#"><i class="fa-regular fa-bell"></i>Notificaciones</a></li>
            </ul>
          </section>

          <!-- Suscripciones -->
          <section class="sidebar-group">
            <button class="sidebar-toggle" type="button" data-target="grp-suscripciones" aria-expanded="false" aria-controls="grp-suscripciones">
              <i class="fa-regular fa-bell"></i><span>Suscripciones</span>
              <i class="fa-solid fa-chevron-down caret"></i>
            </button>
            <ul id="grp-suscripciones" class="sidebar-list" hidden>
              <li><a href="#"><i class="fa-regular fa-newspaper"></i>Newsletter</a></li>
              <li><a href="#"><i class="fa-solid fa-tags"></i>Ofertas especiales</a></li>
              <li><a href="#"><i class="fa-regular fa-bell"></i>Alertas de stock</a></li>
            </ul>
          </section>

          <!-- Promociones -->
          <section class="sidebar-group">
            <button class="sidebar-toggle" type="button" data-target="grp-promos" aria-expanded="false" aria-controls="grp-promos">
              <i class="fa-solid fa-gift"></i><span>🎁 Promociones</span>
              <i class="fa-solid fa-chevron-down caret"></i>
            </button>
            <ul id="grp-promos" class="sidebar-list" hidden>
              <li><a href="#"><i class="fa-solid fa-bolt"></i>Ofertas del día</a></li>
              <li><a href="#"><i class="fa-solid fa-ticket"></i>Cupones activos</a></li>
              <li><a href="#"><i class="fa-solid fa-hand-holding-heart"></i>Programa de lealtad</a></li>
              <li><a href="#"><i class="fa-solid fa-coins"></i>Puntos de recompensa</a></li>
              <li><a href="#"><i class="fa-solid fa-user-group"></i>Referir amigos</a></li>
              <li><a href="#"><i class="fa-solid fa-percent"></i>Descuentos especiales</a></li>
            </ul>
          </section>
        </div>
      </nav>
    </aside>

<!-- CONTENIDO PRINCIPAL (Checkout) -->
<section id="profile-content" aria-label="Checkout">
  <!-- Posicionador -->
  <div class="checkout-positioner pos-top-left" style="--ck-mt:-46px; --ck-ml:-250px;">
    <main class="checkout-grid ck-extra ck-cols-60 ck-right-480 ck-gap-24"
          data-order="summary-right"
          data-sticky="md">

      <!-- ===== IZQUIERDA: Direcciones + Productos + Pago ===== -->
      <section class="checkout-left">

        <!-- Dirección de envío -->
        <div class="card shipping-card">
          <div class="card-header">
            <h2>Dirección de envío</h2>
            <button class="icon-btn" id="edit-shipping-btn" aria-label="Editar dirección">
              <i class="fa-regular fa-pen-to-square"></i>
            </button>
          </div>
          <div class="shipping-body" id="shipping-body">
            <!-- Se llena dinámicamente -->
          </div>
        </div>

        <!-- Productos -->
        <div class="card products-card">
          <h2>Productos</h2>
          <div class="products-scroll" id="products-scroll">
            <!-- Se llenan dinámicamente con <article class="product-mini"> -->
          </div>
        </div>

        <!-- Métodos de pago -->
        <div class="card paymethods-card">
          <h2>Métodos de pago</h2>
          <form class="paymethods" id="paymethods-form">
            <!-- Radios dinámicos desde BD -->
          </form>
        </div>
      </section>

      <!-- ===== DERECHA: Resumen del pedido ===== -->
      <aside class="checkout-right">
        <div class="card summary-card">
          <h2>Resumen del pedido</h2>

          <div class="summary-row">
            <span>Subtotal:</span>
            <strong id="subtotal-amount">$0.00</strong>
          </div>
          <div class="summary-row">
            <span>Envío:</span>
            <strong id="shipping-amount">$0.00</strong>
          </div>

          <div class="summary-total">
            <span>Total del pedido:</span>
            <strong id="total">$0.00</strong>
          </div>

          <p class="terms muted">
            Al enviar su pedido, acepta nuestros
            <a href="#">TÉRMINOS DE USO</a> y la
            <a href="#">POLÍTICA DE PRIVACIDAD</a>.
          </p>

          <button class="checkout-btn" id="confirmar-pagar-btn">
            Confirmar y pagar
            <small class="lowstock-note"></small>
          </button>

          <div id="checkout-feedback" class="checkout-message" aria-live="polite"></div>
        </div>
      </aside>
    </main>
  </div>

  <!-- ===== Modal de direcciones ===== -->
  <div class="modal-backdrop" id="shipping-modal" hidden>
    <div class="modal">
      <header class="modal-header">
        <h3>Seleccionar dirección de envío</h3>
        <button type="button" class="close-modal" id="close-shipping-modal" aria-label="Cerrar">
          &times;
        </button>
      </header>
      <div class="modal-body">
        <div id="addresses-list">
          <!-- Radios de direcciones -->
        </div>
      </div>
      <footer class="modal-footer">
        <button type="button" class="btn" id="select-address-btn">Seleccionar</button>
      </footer>
    </div>
  </div>
</section>


  <!-- Overlay + Carrito -->
  <div class="overlay" id="overlay"></div>
  <div class="cart-modal" id="cart-modal">
    <div class="cart-header">
      <h3 class="cart-title">Tu Carrito</h3>
      <button class="close-cart" id="close-cart" aria-label="Cerrar carrito">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <div class="cart-items">
      <div class="empty-cart">Tu carrito está vacío</div>
    </div>
    <div class="cart-total">
      <div class="total-row">
        <strong>Total:</strong>
        <span id="total-amount">$0.00</span>
      </div>
  </div>

  <!-- Scripts existentes -->
  <script type="module" src="js/checkout/utils.js"></script>
  <script type="module" src="js/checkout/cart.js"></script>
  <script type="module" src="js/checkout/products.js"></script>
  <script type="module" src="js/checkout/main.js"></script>
  <script type="module" src="js/checkout/confirmar_pagar.js"></script>
  <script src="js/checkout/menu.js"></script>
  <script src="js/checkout/proc_pago.js"></script>
  <script src="js/checkout/post_put.js"></script>

  <!-- === Proc Pago: Overlays de proceso/aprobación === -->
<div id="proc-modal1" class="proc-overlay" aria-hidden="true" role="dialog" aria-modal="true">
  <div class="proc-modal-card">
    <!-- Ícono (escudo/loader) -->
    <svg class="proc-shield" viewBox="0 0 24 24" aria-hidden="true">
      <path fill="currentColor" d="M12 2.25l7.5 3v6.59a7.26 7.26 0 0 1-3.45 6.06L12 22l-4.05-4.1A7.26 7.26 0 0 1 4.5 11.84V5.25L12 2.25z"/>
    </svg>

    <div class="proc-title">Procesando pago</div>

    <div class="proc-dots">
      <span class="proc-dot"></span>
      <span class="proc-dot"></span>
      <span class="proc-dot"></span>
    </div>

    <div class="proc-sep"></div>
    <div class="proc-subtitle">Estamos validando tu información…</div>

        <div class="proc-badges">
      <span class="proc-badge">VISA</span>
      <span class="proc-badge">Mastercard</span>
      <span class="proc-badge">Paypal</span>
      <span class="proc-badge">AMEX</span>
      <span class="proc-badge">EEVS-CREDIT</span>
 
  </div>
</div>
    </div>

<div id="proc-modal2" class="proc-overlay" aria-hidden="true" role="dialog" aria-modal="true">
  <div class="proc-modal-card">
    <!-- Ícono (check/aprobado) -->
    <svg class="proc-shield" viewBox="0 0 24 24" aria-hidden="true">
      <path fill="#16a34a" d="M9 16.2l-3.5-3.5-1.4 1.4L9 19 20 8l-1.4-1.4z"/>
    </svg>

    <div class="proc-title">Pago aprobado</div>
    <div class="proc-sep"></div>
    <div class="proc-subtitle">¡Gracias por tu compra!</div>



  </div>
</div>
<!-- === /Proc Pago === -->


</body>
</html>
